webpackJsonp([1],{710:function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}return a("next")})}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(48),l=n.n(s),u=n(0),h=n.n(u),f=n(152),m=n(279),p=n(278),d=n(96),b=n(719),v=(n.n(b),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),g=function(e){function t(e){var n=this;o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return c.handleChange=function(e){c.setState(r({},e.target.id,e.target.value))},c.handleFileChange=function(e){if(c.state.note.attachment&&window.confirm("Replace old attachment?")){var t=c.state.note.attachment.match(/(?:.*?\/){3}(.*)/);Object(m.c)(unescape(t[1]))}c.file=e.target.files[0]},c.handleSubmit=function(){var e=a(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0,t.preventDefault(),!(c.file&&c.file.size>d.a.MAX_ATTACHMENT_SIZE)){e.next=5;break}return alert("Please pick a file smaller than 5MB"),e.abrupt("return");case 5:if(c.setState({isLoading:!0}),e.prev=6,!c.file){e.next=11;break}return e.next=10,Object(m.d)(c.file);case 10:a=e.sent.Location;case 11:return e.next=13,c.saveNote(Object.assign({},c.state.note,{content:c.state.content,attachment:a||c.state.note.attachment}));case 13:c.props.history.push("/"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),alert(e.t0),c.setState({isLoading:!1});case 20:case"end":return e.stop()}},e,n,[[6,16]])}));return function(t){return e.apply(this,arguments)}}(),c.handleDelete=function(){var e=a(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=window.confirm("Are you sure you want to delete this note and any attachments it may have?")){e.next=4;break}return e.abrupt("return");case 4:return c.setState({isDeleting:!0}),e.prev=5,c.state.note.attachment&&(r=c.state.note.attachment.match(/(?:.*?\/){3}(.*)/),Object(m.c)(decodeURIComponent(r[1]))),e.next=9,c.deleteNote();case 9:c.props.history.push("/"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),alert(e.t0),c.setState({isDeleting:!1});case 16:case"end":return e.stop()}},e,n,[[5,12]])}));return function(t){return e.apply(this,arguments)}}(),c.textAreaMaxChar=500,c.file=null,c.state={isLoading:null,isDeleting:null,note:null,content:"",editNote:!1},c}return c(t,e),v(t,[{key:"componentDidMount",value:function(){function e(){return t.apply(this,arguments)}var t=a(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getNote();case 3:t=e.sent,this.setState({note:t,content:t.content}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}()},{key:"getNote",value:function(){return Object(m.b)({path:"/notes/"+this.props.match.params.id})}},{key:"validateForm",value:function(){return this.state.content.length>0}},{key:"formatFilename",value:function(e){return e.length<50?e:e.substr(0,20)+"..."+e.substr(e.length-20,e.length)}},{key:"saveNote",value:function(e){return Object(m.b)({path:"/notes/"+this.props.match.params.id,method:"PUT",body:e})}},{key:"deleteNote",value:function(){return Object(m.b)({path:"/notes/"+this.props.match.params.id,method:"DELETE"})}},{key:"renderEditNote",value:function(){return h.a.createElement("div",{className:"Note"},this.state.note&&h.a.createElement("form",{onSubmit:this.handleSubmit},h.a.createElement(f.d,{controlId:"content"},h.a.createElement(f.b,null,"Max characters: ",this.textAreaMaxChar),h.a.createElement(f.c,{onChange:this.handleChange,value:this.state.content,maxLength:this.textAreaMaxChar,componentClass:"textarea"})),this.state.note.attachment&&h.a.createElement(f.d,null,h.a.createElement(f.b,null,"Attachment"),h.a.createElement(f.c.Static,null,h.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.state.note.attachment},this.formatFilename(this.state.note.attachment)))),h.a.createElement(f.d,{controlId:"file"},!this.state.note.attachment&&h.a.createElement(f.b,null,"Attachment"),h.a.createElement(f.c,{onChange:this.handleFileChange,type:"file"})),h.a.createElement(p.a,{block:!0,bsStyle:"primary",bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Save",loadingText:"Saving\u2026"}),h.a.createElement(p.a,{block:!0,bsStyle:"danger",bsSize:"large",isLoading:this.state.isDeleting,onClick:this.handleDelete,text:"Delete",loadingText:"Deleting\u2026"})))}},{key:"renderNote",value:function(){var e=this;return h.a.createElement("div",{className:"Note"},this.state.note&&h.a.createElement("form",null,h.a.createElement(f.d,null,h.a.createElement(f.b,null,"Note (private)"),h.a.createElement("p",{align:"justify"},this.state.content),h.a.createElement(f.b,null,"Attachment (public)"),this.state.note.attachment&&h.a.createElement(f.c.Static,null,h.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.state.note.attachment},this.formatFilename(this.state.note.attachment)))),h.a.createElement(f.a,{type:"button",onClick:function(){return e.setState({editNote:!0})}},"Edit")))}},{key:"render",value:function(){return h.a.createElement("div",{className:"Note"},this.state.editNote?this.renderEditNote():this.renderNote())}}]),t}(u.Component);t.default=g},719:function(e,t,n){var a=n(720);"string"===typeof a&&(a=[[e.i,a,""]]);var r={hmr:!1};r.transform=void 0;n(704)(a,r);a.locals&&(e.exports=a.locals)},720:function(e,t,n){t=e.exports=n(703)(!1),t.push([e.i,".Note form{padding-bottom:15px}.Note form textarea{height:300px;font-size:24px}",""])}});