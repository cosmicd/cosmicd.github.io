webpackJsonp([3],{706:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,i){try{var o=t[a](i),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(48),c=n.n(u),l=n(0),f=n.n(l),d=n(152),m=n(278),p=n(711),h=(n.n(p),n(280)),g=n(96),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=function(e){function t(e){var n=this;i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.handleChange=function(e){s.setState(a({},e.target.id,e.target.value))},s.handleSubmit=function(){var e=r(c.a.mark(function e(t){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState({isLoading:!0}),e.prev=2,e.next=5,s.signup();case 5:r=e.sent,s.setState({user:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:s.setState({isLoading:!1});case 13:case"end":return e.stop()}},e,n,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),s.handleConfirmationSubmit=function(){var e=r(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s.setState({isLoading:!0}),e.prev=2,e.next=5,s.confirm();case 5:return e.next=7,s.authenticate();case 7:s.props.userHasAuthenticated(!0),s.props.history.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),alert(e.t0),s.setState({isLoading:!1});case 15:case"end":return e.stop()}},e,n,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),s.state={isLoading:!1,email:"",password:"",confirmedPassword:"",confirmationCode:"",user:null},s}return s(t,e),v(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.password.length>0&&this.state.password===this.state.confirmedPassword}},{key:"validateConfirmationForm",value:function(){return this.state.confirmationCode.length>0}},{key:"signup",value:function(){var e=this,t=new h.d({UserPoolId:g.a.aws.cognito.userpoolId,ClientId:g.a.aws.cognito.appClientId}),n={Name:"email",Value:this.state.email},r=new h.c(n);return new Promise(function(n,a){return t.signUp(e.state.email,e.state.password,[r],null,function(e,t){if(e)return void a(e);n(t.user)})})}},{key:"confirm",value:function(e,t){var n=this;return new Promise(function(e,t){return n.state.user.confirmRegistration(n.state.confirmationCode,!0,function(n,r){if(n)return void t(n);e(r)})})}},{key:"authenticate",value:function(e,t,n){var r=this,a={Username:this.state.email,Password:this.state.password},i=new h.a(a);return new Promise(function(e,t){return r.state.user.authenticateUser(i,{onSuccess:function(t){return e()},onFailure:function(e){return t(e)}})})}},{key:"renderConfirmationForm",value:function(){return f.a.createElement("form",{onSubmit:this.handleConfirmationSubmit},f.a.createElement(d.d,{controlId:"confirmationCode",bsSize:"large"},f.a.createElement(d.b,null,"Confirmation Code"),f.a.createElement(d.c,{autoFocus:!0,type:"tel",value:this.state.confirmationCode,onChange:this.handleChange}),f.a.createElement(d.f,null,"Please check your email for the code.")),f.a.createElement(m.a,{block:!0,bsSize:"large",disabled:!this.validateConfirmationForm(),type:"submit",isLoading:this.state.isLoading,text:"Verify",loadingText:"Verifying\u2026"}))}},{key:"renderForm",value:function(){return f.a.createElement("form",{onSubmit:this.handleSubmit},f.a.createElement(d.d,{controlId:"email",bsSize:"large"},f.a.createElement(d.b,null,"Email"),f.a.createElement(d.c,{autoFocus:!0,type:"email",value:this.state.email,onChange:this.handleChange})),f.a.createElement(d.d,{controlId:"password",bsSize:"large"},f.a.createElement(d.b,null,"Password"),f.a.createElement(d.c,{value:this.state.password,onChange:this.handleChange,type:"password"})),f.a.createElement(d.d,{controlId:"confirmedPassword",bsSize:"large"},f.a.createElement(d.b,null,"Confirm Password"),f.a.createElement(d.c,{value:this.state.confirmedPassword,onChange:this.handleChange,type:"password"})),f.a.createElement(m.a,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Signup",loadingText:"Signing up\u2026"}))}},{key:"render",value:function(){return f.a.createElement("div",{className:"Signup"},null===this.state.user?this.renderForm():this.renderConfirmationForm())}}]),t}(l.Component);t.default=b},711:function(e,t,n){var r=n(712);"string"===typeof r&&(r=[[e.i,r,""]]);var a={hmr:!1};a.transform=void 0;n(704)(r,a);r.locals&&(e.exports=r.locals)},712:function(e,t,n){t=e.exports=n(703)(!1),t.push([e.i,"@media (min-width:480px){.Signup{padding:60px 0}.Signup form{margin:0 auto;max-width:320px}}.Signup form span.help-block{font-size:14px;padding-bottom:10px;color:#999}",""])}});